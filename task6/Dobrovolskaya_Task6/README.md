# DEMON  

>Отслеживает изменения текстовых файлов в директории процесса, пид которого указывается при запуске программы  

Работает в двух режимах:  

1. **Интерактивный режим**  
 
Запуск с опцией **-i**  
Взаимодействие с пользователем через *stdin*  
Доступны три действия:  
1.) Вывод k последних изменений в файл last_diffs.txt  
2.) Изменение периода семплирования  
3.) Выход  

Если хотим отслеживать в интерактивном режиме директорию процесса с пидом 3082, то  

Запуск:  
```
  $ make
  $ ./Demon.exe -i 3082
```

2. **Режим Демона**  


Запуск с опцией **-d**  
Взаимодействие с пользователем через файл *log.txt* и через канал *FIFO(/tmp/file.fifo)*  

*Все запросы на ввод и информация* о сделанном печатается в файл *log.txt*, находящийся в директории, из которой была запущена программа  

*Все ответы пользователя* должны быть записаны в */tmp/file.fifo*, с помощью команды *cat*:  

*Пример запуска в режиме демона для процесса с пидом 3771:*  

```
  $ make
  $ ./Demon.exe -d 3771
```

В файле log.txt появится:  

```
Что вы хотите сделать?  
1 - вывести k диффов    
2 - изменить период семплирования   
3 - выход  
``` 

Если хотим вывести 5 последних изменений и выйти, то  

```
  $ cat > /tmp/file.fifo
  $ 1 
  $ 5
  $ 3
```

Они отобразятся в файле *last_diffs.txt*    

Если демон вышел из-под контроля то можно его убить по известому пиду (выведен сразу после запуска программы, например, "Мой пид: 2219") и вручную удалить *file.fifo*:  

```
  $ kill 2219
  $ rm /tmp/file.fifo
```


Чтобы удалить объектные файлы:  
```
  $ make clean
```
