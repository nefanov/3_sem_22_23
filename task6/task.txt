Задача 6 "directory diff service"

Разработать программу-демон, которая:

1) Находит процесс по его PID, читает его рабочую директорию и запись на procfs /proc/<pid name>

2) Выполняет следующее:

Вариант 1: просматривает рабочую директорию процесса, находит в ней изменения только в текстовых файлах (см. пример на diff + подумайте, 
как программно определить, что файл текстовый, используя утилиту file), после чего сохраняет его, то есть делает бекап.
Поддержать инкрементальные бекапы (сохраняем только последовательности diff-ов и временную отметку создания,
потом их последовательно накатываем на исходные состояния файлов). При первом обращении к директории разрешается сделать полный бекап всех регулярных текстовых файлов.

Вариант 1:

В любом из вариантов, демон должен сохранять данные в виде периодических семплов, то есть делать одну запись в T мс, где T - период семплирования, задаваемый
демону через некоторый канал IPC взаимодействия с ним (например, FIFO). Кроме того, этот через этот канал демону можно передавать команды для:
- вывода текущего диффа
- вывод k диффов за k-e число семплов назад
- что-то ещё, что-то ещё, что пригодится Вам в работе ...

"Плюсик в карму" за огранизацию "обратных диффов" и команды по восстановлению предыдущих состояний файлов k-е число семплов назад, где k -- параметр команды (см. grep -Fxf file1 file2).

Демон должен быть отвязан от управляющего терминала и быть защищённым от нежелательных сигналов и каналов ввода/вывода. 
Демон должен запускаться с опцией -d. В случае указания опции -i либо без -i/d, программа должна работать в интерактивном режиме.
На приёме также будет производиться контроль утечки ресурсов.
